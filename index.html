<!DOCTYPE html>
<html>
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
	<script src="http://code.jquery.com/jquery-1.11.3.min.js" type="text/javascript"></script>
  	<script src="https://api.trello.com/1/client.js?key=726d81e0e0aef5097ea6739fd5f47e5e"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
	<style>
	canvas{
		-moz-user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}
	</style>
</head>

<body>
<div class="container">
	<canvas id="canvas" width="1600" height="900"></canvas>
</div>
<script>
var listNameArray = [];
var cardNameArray = [];
var loadedActions = function(cards) {debugger


angular.forEach(cards , function (value,key) {debugger
	var cardName = value.name;
	cardNameArray.push(cardName);
});
var config = {
			type: 'line',
			data: {
				xLabels:cardNameArray ,
				yLabels: listNameArray,
				datasets: [{
					label: 'My First dataset',
					data: listNameArray,
					fill: false
				}]
			},
			options: {
				responsive: true,
				title: {
					display: true,
					text: 'Chart with Non Numeric Y Axis'
				},
				scales: {
					xAxes: [{
						display: true,
						scaleLabel: {
							display: true,
							labelString: 'cards'
						}
					}],
					yAxes: [{
						type: 'category',
						position: 'left',
						display: true,
						scaleLabel: {
							display: true,
							labelString: 'Lists'
						},
						ticks: {
							reverse: true
						}
					}]
				}
			}
		};
		window.onload = function() {
			var ctx = document.getElementById('canvas').getContext('2d');
			window.myLine = new Chart(ctx, config);
		};
}



var loadedBoards = function(lists) {debugger
	angular.forEach(lists , function (value,key) {
		var str = value.id;
		var listName= value.name;
		listNameArray.push(listName);
		var res = str.replace(/"/g, '');
                var baseUrl = '/lists/';
		var postUrl = '/cards/';
		
		Trello.get(
        		baseUrl+res+postUrl,
        		loadedActions,
        		function() { console.log("Failed to load boards"); }
      		);
	});


}

</script>

<script type="text/javascript">
    var loadBoards = function() {
      //Get the users boards
      Trello.get(
        'boards/5b75e2a2e18a957e3a7294fb/lists',
        loadedBoards,
        function() { console.log("Failed to load boards"); }
      );
    };
    
    Trello.authorize({
      type: "popup",
      name: "Trello dashboard",
      scope: {
        read: true,
        write: false },
      expiration: "never",
      success: loadBoards,
      error: function() { console.log("Failed authentication"); }
    });
  </script>
  
</body>
</html>