<!DOCTYPE html>
<html>
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
	<script src="http://code.jquery.com/jquery-1.11.3.min.js" type="text/javascript"></script>
  	<script src="https://api.trello.com/1/client.js?key=726d81e0e0aef5097ea6739fd5f47e5e"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
	
</head>

<body>
<div class="container">
	<canvas id="bar-chart" width="800" height="450"></canvas>
</div>
<script>
var listNameArray = [];
var cardNameArray = [];
var loadedActions = function(cards) {
	angular.forEach(cards , function (value,key) {
		<div>
			<html> saumya </html>
		</div>
		var cardName = value.name;
		cardNameArray.push(cardName);
	});

	new Chart(document.getElementById("bar-chart"), {
        	type: 'bar',
    		data: {
      			xLabels: cardNameArray,
			yLabels: listNameArray,
      			datasets: [
        			{
          				label: "Population (millions)",
          				backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850"],
          				data: ['Request Added', 'Request Viewed', 'Request Added']
        			}
      			]
    		},
    		options: {
      			legend: { display: false },
      			title: {
        			display: true,
        			text: 'brexit means brexit'
      			}
    		}
	});

}

var loadedBoards = function(lists) {
	angular.forEach(lists , function (value,key) {
		var str = value.id;
		var listName= value.name;
		listNameArray.push(listName);
		var res = str.replace(/"/g, '');
                var baseUrl = '/lists/';
		var postUrl = '/cards/';
		
		Trello.get(
        		baseUrl+res+postUrl,
        		loadedActions,
        		function() { console.log("Failed to load boards"); }
      		);
	});

}

</script>

<script type="text/javascript">
    var loadBoards = function() {
      //Get the users boards
      Trello.get(
        'boards/5b20f0cfb972917500a4b2d3/lists',
        loadedBoards,
        function() { console.log("Failed to load boards"); }
      );
    };
    
    Trello.authorize({
      type: "popup",
      name: "Trello dashboard",
      scope: {
        read: true,
        write: false },
      expiration: "never",
      success: loadBoards,
      error: function() { console.log("Failed authentication"); }
    });
  </script>
  
</body>
</html>