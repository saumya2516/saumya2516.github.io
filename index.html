<!DOCTYPE html>
<html>
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
	<script src="http://code.jquery.com/jquery-1.11.3.min.js" type="text/javascript"></script>
  	<script src="https://api.trello.com/1/client.js?key=726d81e0e0aef5097ea6739fd5f47e5e"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
	
</head>
<style>
	table {
    font-family: arial, sans-serif;
    border-collapse: collapse;
    width: 100%;
}

td, th {
    border: 1px solid #dddddd;
    text-align: left;
    padding: 8px;
}

tr:nth-child(even) {
    background-color: #dddddd;
}
</style>
<body>
	<table id = table>
		<th> Release name </th>
		<th> Status </th>
	</table>

<script>

var loadedActions = function(cards) {
	
	angular.forEach(cards , function (value,key) {
		var list;
		switch(value.idList) {
			case '5b20f2203ce6409d919b7281' : 
				list = 'Voided';
				break;
			case '5b20f1177994c475a10be920': 
				list = 'Creating';
				break;
			case '5b20f138528ff7918365a5b7' : 
				list = 'RTL';
				break;
			case '5b20f15424b0c9eafe53aa8b' : 
				list = 'Live';
				break;

		}
		var iDiv = document.getElementById('table');
		var cardName = document.createElement("tr");
		var first = document.createElement("td");
		var node1 = document.createTextNode(value.name);
		first.appendChild(node1);
		cardName.appendChild(first);

		var listName = document.createElement("td");
		var node2 = document.createTextNode(list);
		listName.appendChild(node2); 
		cardName.appendChild(listName);

		iDiv.appendChild(cardName);
		iDiv.className = 'box-container';
		document.getElementsByTagName('body')[0].appendChild(iDiv);
		
	});
	
	
}

var loadedBoards = function(lists) {debugger
	angular.forEach(lists , function (value,key) {
		var str = value.id;
		var listName= value.name;
		var res = str.replace(/"/g, '');
                var baseUrl = '/lists/';
		var postUrl = '/cards/';
		
		Trello.get(
        		baseUrl+res+postUrl,
        		loadedActions,
        		function() { console.log("Failed to load boards"); }
      		);
	});

}

</script>

<script type="text/javascript">
    var loadBoards = function() {
      //Get the users boards
      Trello.get(
        'boards/5b20f0cfb972917500a4b2d3/lists',
        loadedBoards,
        function() { console.log("Failed to load boards"); }
      );
    };
    
    Trello.authorize({
      type: "popup",
      name: "Trello dashboard",
      scope: {
        read: true,
        write: false },
      expiration: "never",
      success: loadBoards,
      error: function() { console.log("Failed authentication"); }
    });
  </script>
 </body> 

</html>